<article class="first">
  <div class="title">
    <h1>The State of Our World in 2023, Pt. 1</h1>
  </div>
</article>

---

[![made-with badge](https://img.shields.io/static/v1?label=Made%20with&message=Obsidian&color=7d5bed&logo=obsidian&labelColor=1a1a1a&style=flat)](https://obsidian.md/)

[![type](https://img.shields.io/static/v1?label=Type&message=blog&color=e60048&logo=data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAAi0lEQVRIS+2WMQ7AIAhF/UNXrtP7rz2OYxeqTWxMTBUSxQVXfnzyQQKC8YExL7zAGCNbgIkIsIKVhBw4vbR7unR6Gp0LvwxXd2v+EvkdDpxWXpWlRTyi9/pABRyBJHEHSlxSadxSlV0SsVsqcUml2W/pynWxnsXNisHMRxrCl8qvH3ECnQDuOmy+0zwB4WNxmUKgwwAAAABJRU5ErkJggg==&labelColor=1a1a1a&style=flat)](https://pabloagn.com/blog/) [![category](https://img.shields.io/static/v1?label=Category&message=data-science&color=e60048&logo=data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAB9UlEQVRIS6VWMU7DQBDkDAQEdrAoCISCAomCL1DxC95Azy9oeQS/oOIHVFAgREFoCHGCRSzZzEU+63LZ9W6CO/vudmZ2d9Zn1pTPaDSqut2usduHw+FpFEUv7t1fk8LNAkiPDWj3+ADuTPjNvXMxWwGzLCuqqtqwh5MkiY0xEwfOAfrEKFAWUBO4DZQDXgCEqjuouvbZUanUrocpngMMVUkKtKC+WhFQUudAUd8r1PkepJ/w7Tysn4uzkNJlascF9WOASAki6w0xrn19b3Gpps5y3kRfJADPZgr9gJSP0EgDHDiQ/Mp50PfxAmDtuQhsZmb/z0OVhwSkmGrSGp5bGRDp3EFaJ5JaiahdZ2vYNj/JkWVMgW7sgNw2yOW+99gacp7TeFE72OcUrgo4Ho93+/3+D5T9QmGHm0BNSnHgMI7jj9Ai2tElZGCK9S3S+GA4BcNNydBaIuEstu/iLJWCa+pLDm+Nz+xQAsBenucnRVG8asFq0s/Yf9YoVAI21wyn3N4I7M1A8ijWHwB42XrFqIO9YfMRlVqqyXC5ukED3nIEVJcoBXv1lmWa5gIpeeQioyTWVj1uXf0DpgKUZbmfpunXKnVnU9rWDKiTHRSDNkDu36iqIQK/Q+mxU8sBYniL/1EVoJ9Wqwo/5x6Cf9YKv6Em1XbNH5bGfSwvuRe1AAAAAElFTkSuQmCC&labelColor=1a1a1a&style=flat)](https://pabloagn.com/categories/data-science/) [![technologies](https://img.shields.io/static/v1?label=Technologies&message=Python&color=e60048&logo=data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA1klEQVR4nM2RMW7CUBBEnUikIQUIlBJxrrQgJG7ABRBnoUkaWhpoUgWJlgNYbvz/G1dUi1ayoy87rpOtVrszs6OdLPtXlef5UNJXjHHcCwohjMzsKZ3FGN+Bq/e+c0xHGfiWtEznkg6SNnW/dIxjs0YJ2AMnM3tJSFPgHkKY17gBcAQ+zOw5A3aSbsCkdW0NnNOZY2rstpcInJ3cS/SzwGdqtSzLmdusquqtIXWsehVF8QpcJK1qmxt/TMv6wjE/z0leP27i8Ag8inT/axxtAQ+9o/zn9QD3JOiyTjnQEQAAAABJRU5ErkJggg==&labelColor=1a1a1a&style=flat)](https://pabloagn.com/technologies/) [![website article](https://img.shields.io/static/v1?label=Website&message=Post%20Link&color=e60048&logo=data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB+ElEQVR4nO2VOYgUURCGR/BAI4MN1EwjI89EMDYQvNBNNNlcE0VBUdlUUSMjj2BF2UDRePDAwGzNF2GNPIYd8Hjv/6YnEHSf/FIDPTJiu4nJFBTd1Kv6/nrVBd1q/S8DJiU9AmaBm5LOSjoATPwDY0LSQUnnzDArmJOjkqclvQceSHohaR6oJC1JeiPprqT9pZSVg5pSyirH4sw5S1EzbwZwP5jTIwWBdj1meEppZ6/XOyXpCdCX9Am4Fv45Yo+Bk1VV7ag3FNz2kKC7yznvHiX4u3U6nXU55xPAW7vfHfvLmNtmW8NaFux67k0Ea03esTfJJQTj23bHgiNtPNK6jZem3Wpg46Wp23hp2q0GNl6axksjaRGYkXRF0mnHq6ra2HSk/X5/k6RDks6YEazFPwnuBS5KuirptqTnkj4CJZ4zwNFSytqBoP/2wDHgXi33A/BM0i2zzDR7SBC4LGlPr9fb5huVUlYMus45b5E0FYJfgQS8C8/Al7jJVEpp86DODLPMNDs0up7xXBQZVKLLb8CCpIfA+ZzzvpTS+lLKGuAI8DT8cClltc+c49yoWQjGL140ao25oW8QXW1IKe3KOR8Hbkh66ZtI+i7plaG+iR244JjP3HDkXnetGWbVp9XYopHtHgvwWtIPu9+BSx7bssBNDdhqX07xT/Jbz1SBBDGHAAAAAElFTkSuQmCC&labelColor=1a1a1a&style=flat)](https://pabloagn.com/blog/programming-best-practices-writing-better-code/)

Aaaaaa

In this Blog Article, we'll

We'll be using Python scripts which can be found in the [Blog Article Repo](https://github.com/ajourneythroughdatascience/blog/tree/master/ides/beloved-vs-code-extensions-i-use-daily).

---

# Table of Contents
- [Legibility](#legibility)
	- [Authoring](#1-authoring)
	- [Comments](#2-comments)
- [Conclusions](#conclusions)
- [References](#references)
- [Copyright](#copyright)

---

# About this series
For some time now, I've been thinking about the flood of news and opinions we're exposed to daily. It's a lot. Everywhere we turn, there's talk about economic downturns, social upheavals, environmental crises, full-scale wars, or increased polarization. And if you're anything like me, this constant flow of information can leave you feeling anxious (*it even has an appointed term called "headline stress disorder", but more on this later*). You want to be involved but there's too much going on. 

Are things really as bad as they sound? Are they better or worst? Are we getting the whole story, or just fragments shaped by the loudest voices? Which sources of information are we consulting? Are they first-hand, second-hand, third-hand, or entirely made up? Are they government-based, or private-based? Are they leaning towards a left stand, a center stand or a right stand? Are our favorite news corporations owned by a multi-national conglomerate or by a non-profit organization?

Turns out, ingesting information is a lot like ingesting food, but even more critical really, because information has the capacity to shape our personality, the very things we stand for, and sometimes we don't even realize this. Just as we can lean towards a balanced diet, we can also choose to use reliable data and try to interpret it for ourselves.

Over the last five months, I've dug into the task of creating a data repository filled with gigabytes of reliable data from credible sources – a quest that's been daunting & bleak but also extremely enlightening & comforting. What I've found is a wealth of incredible organizations providing information that doesn't often make it into the daily news cycle, data that can help us see beyond the headlines and draw our own conclusions, and that is most often used by Economists or Statisticians, when it should be readily accessible to the general public (*yeah, some of these datasets hardly get past 9 downloads...per month*).

I'm not an Economist by any stretch. I'm simply a Data Scientist who's curious and a bit tired of all the misinformation and how it affects our capacity to focus resources on what really matters. This is why each week, throughout the month of December, I'll share my findings with you, examining different aspects of our world's current state – not to add to the noise, but to help us all make sense of it.

---

# What to expect
This will be a hands-on series. We'll not simply discuss results, but actually review the code in order to produce quality visualizations. 

We'll look at a lot of data from internationally-renowned sources like [The World Bank](https://www.worldbank.org/en/home), [UN](https://www.un.org/en/), [UNICEF](https://www.unicef.org/), [ILOSTAT](https://ilostat.ilo.org/), [World Health Organization](https://www.who.int/), and much more. I'll be learning right alongside you, breaking down complex economic concepts into something slightly more digestible. I'll always provide the raw data appropriately cited so you can always draw your own conclusions and use it however you want. I'll also include all the second hand resources that I used throughout this process and found superb at complementing the raw data. We'll discuss a lot of industry-standard metrics under the most relevant topics.

The goal? To equip ourselves with better tools for critical analysis. To move beyond anxiety-inducing headlines and understand the broader context – historical patterns, global comparisons, underlying causes and effects, the credibility and biases of different sources, and the intricate details that shape a story or issue. By the end of this series, we'll hopefully feel a bit more grounded and informed. Not just about the bad news, but about the paths to improvement and the many facets of our world that often go unnoticed.

For this series, we'll be mostly using [R](https://pabloagn.com/technologies/r/) & [RStudio](https://pabloagn.com/technologies/rstudio/), however, we'll also include additional technologies such as [Python](https://pabloagn.com/technologies/python/) for some Machine Learning methods, [JupyterLab](https://pabloagn.com/technologies/jupyter-lab/), [VS Code](https://pabloagn.com/technologies/vs-code/) & [PowerBI](https://pabloagn.com/technologies/powerbi/).

---

# The state of news today

## 1. Media Confidence
According to Reuters' Institute for the Study of Journalism [Digital News Report 2023](https://reutersinstitute.politics.ox.ac.uk/sites/default/files/2023-06/Digital_News_Report_2023.pdf), only 10 out of 46 countries have a share of adult trust in news media as of February 2023 above 50%. This means that 78.2% of the surveyed countries have a trust share below 50%:

![[statistic_id308468_trustworthiness-of-news-media-worldwide-2023.png]]

###### Figure: [Share of adults who trust news media most of the time in selected countries worldwide as of February 2023, Reuters Institute for the Study of Journalism](https://www.statista.com/statistics/308468/importance-brand-journalist-creating-trust-news/)

Additionally, according to Reuters Institute, the gap between trust in news on platforms vs trust in news in general is significant for most of the platforms under study:


###### Figure: , Reproduced by Pablo Aguirre


According to Gallup, in the US alone, public trust in mass media has plummeted to 2016 record low numbers (*2016 included Donald Trump's presidential candidacy*). Moreover, we can see that the trend of the percentage of people not trusting mass media at all, has been steadily increasing since Gallup first started with this survey in 1972, as we can see from the chart below:

![[americans-trust-in-mass-media-1972-2023-.png]]

###### Figure: [Americans' Trust in Mass Media, 1972-2023, Gallup](https://news.gallup.com/poll/512861/media-confidence-matches-2016-record-low.aspx)

And this phenomenon is 

So, why are people still misinformed?

## 2. The QUIBBLE method
This article would be incomplete without first going over what I call the QUIBBLE method (*Questioning Underlying Information Before Believing, Learning, and Endorsing*). You see, when we're hit with news, the headline is often much more prevalent than the actual information contained in the article. This is because ["we live in a hypercompetitive world, and clickbait titles simply sell more news"](https://www.apa.org/monitor/2022/11/strain-media-overload).

Thus, when the data arrives, we already have a certain predisposition, and more specifically, we already felt something. This not only causes a potential bias, but is increasingly affecting people emotionally, as observed by Dr. Steven Stosny in his [_Washington Post_ opinion piece in 2017](https://www.washingtonpost.com/news/inspired-life/wp/2017/02/06/suffering-from-headline-stress-disorder-since-trumps-win-youre-definitely-not-alone/).

## 2. Breaking patterns
So how can we bypass this initial reaction, and focus on weather the piece is valid in the first place. Turns out there are some techniques we can (consciously) practice whenever we're exposed to news articles:
1. **Verifying the Primary Source**:
    - Ensure the primary source is credible and authoritative.
    - Check if the sources cited actually exist and are accessible.
    - Confirm that the data matches the information provided by the sources.
2. **Understanding Source Bias and Funding**:
    - Research the inclinations or biases of the source.
    - Identify the funding behind the research or data collection to uncover potential conflicts of interest.
3. **Analyzing the Metrics Used**:
    - Understand the metrics or indicators being used and how they are defined.
    - Assess the appropriateness of the metrics for the context or claim being made.
4. **Evaluating Data Collection Methods**:
    - Examine how the data was collected (e.g., surveys, experiments, administrative data).
    - Check for potential biases or errors in the data collection process.
5. **Inspecting Data Visualization Techniques**:
    - Look at the types of visualizations (graphs, charts, maps) used to present the data.
    - Assess whether the scales (linear, logarithmic) are appropriate and not misleading.
    - Ensure legends and labels are clear and accurate.
6. **Checking for Data Consistency and Timeliness**:
    - Ensure the data is consistent internally and with other credible sources.
    - Confirm that the data is current or relevant to the time period being discussed.
7. **Reviewing Statistical Analysis Methods**:
    - Understand the statistical methods used to analyze the data.
    - Check if the conclusions drawn are statistically valid and reasonably derived from the data.
8. **Considering Data Transparency and Reproducibility**:
    - Determine if the data and methodologies are transparent enough for independent verification.
    - Assess if the study or data analysis can be replicated or peer-reviewed.

## It happens to everyone, really
As a Data Scientist, I've gone over countless occasions where information is presented incorrectly (*I myself am guilty of this error*).


---
# Document structure
Since we'll be managing a lot of information & results, we'll keep an organized structure throughout the article. The framework will be as follows:
1. **Workspace setup using R & Python**: We'll be using both languages throughout this series. We'll focus on using R for the data transformations, statistic methods & visualizations. Python will be strongest when we start designing using Machine Learning models latter in the series. We'll create a project & environments for each case.
2. **A brief introduction to R**: Since much of what we'll do here will be related to designing & creating effective visualizations, we'll invest some time discussing how this works in R.
3. **Statistical Analysis & Metrics Visualization**: This will be the core of this series. We'll mostly focus on visualizing data from multiple sources, as well as perform statistical analyses if required. This section will be hierarchically divided as follows:
	1. **Segments**: Indicate the overall area of focus.
	2. **Subjects**: Indicate a more specific topic, and contain a group of metrics.
	3. **Metrics**: Measurements used to track and assess the status of a specific process. As we'll see soon, metrics can be classified into subgroups.

Below you will find a detailed breakdown of the Segments, Subjects & Metrics we'll tackle:

| Metric Code | Segment                            | Subject                                 | Source                                                                    |
| ----------- | ---------------------------------- | --------------------------------------- | ------------------------------------------------------------------------- |
| 01_01       | Macroeconomics                     | GDP                                     | The World Bank                                                            |
| 01_02       | Macroeconomics                     | GDP                                     | The World Bank                                                            |
| 01_03       | Macroeconomics                     | GDP                                     | The World Bank                                                            |
| 01_04       | Macroeconomics                     | GDP                                     | The World Bank                                                            |
| 01_05       | Macroeconomics                     | GDP                                     | The World Bank                                                            |
| 01_06       | Macroeconomics                     | Economic Metrics                        | The World Bank                                                            |
| 01_07       | Macroeconomics                     | Economic Metrics                        | International Monetary Fund (IMF)                                         |
| 01_08       | Macroeconomics                     | Economic Metrics                        | The World Bank                                                            |
| 01_09       | Macroeconomics                     | Economic Metrics                        | The Economist                                                             |
| 01_10       | Macroeconomics                     | Economic Metrics                        | United Nations Environment Programme (UNEP)                               |
| 01_11       | Macroeconomics                     | Economic Metrics                        | (blank)                                                                   |
| 01_12       | Macroeconomics                     | Economic Metrics                        | The World Bank                                                            |
| 01_13       | Macroeconomics                     | Economic Metrics                        | The World Bank                                                            |
| 01_14       | Macroeconomics                     | Unemployment & Underemployment          | The World Bank                                                            |
| 01_15       | Macroeconomics                     | Unemployment & Underemployment          | The World Bank                                                            |
| 01_16       | Macroeconomics                     | Unemployment & Underemployment          | International Labor Organization (ILOSTAT)                                |
| 01_17       | Macroeconomics                     | Debt & Deficit                          | International Monetary Fund (IMF)                                         |
| 01_18       | Macroeconomics                     | Debt & Deficit                          | Central Intelligence Agency (CIA)                                         |
| 01_19       | Macroeconomics                     | Income Inequality                       | The World Bank                                                            |
| 01_20       | Macroeconomics                     | Income Inequality                       | The World Bank                                                            |
| 01_21       | Macroeconomics                     | Income Inequality                       | The World Bank                                                            |
| 01_22       | Macroeconomics                     | Income Inequality                       | United Nations Development Programme (UNDP)                               |
| 01_23       | Macroeconomics                     | Poverty                                 | United Nations Development Programme (UNDP)                               |
| 01_24       | Macroeconomics                     | Poverty                                 | International Labor Organization (ILOSTAT)                                |
| 01_25       | Macroeconomics                     | Income Disparities & Wage Gap           | Credit Suisse                                                             |
| 01_26       | Macroeconomics                     | Income Disparities & Wage Gap           | World Economic Forum                                                      |
| 01_27       | Macroeconomics                     | Income Disparities & Wage Gap           | Organisation for Economic Co-operation and Development (OECD)             |
| 01_28       | Macroeconomics                     | Currency Value Against USD              | Organisation for Economic Co-operation and Development (OECD)             |
| 01_29       | Macroeconomics                     | Minimum Wage                            | International Labor Organization (ILOSTAT)                                |
| 01_30       | Macroeconomics                     | Labor Force Participation               | International Labor Organization (ILOSTAT)                                |
| 01_31       | Macroeconomics                     | Labor Force Participation               | International Labor Organization (ILOSTAT)                                |
| 01_32       | Macroeconomics                     | Household Dynamics                      | Organisation for Economic Co-operation and Development (OECD)             |
| 01_33       | Macroeconomics                     | Household Dynamics                      | Organisation for Economic Co-operation and Development (OECD)             |
| 01_34       | Macroeconomics                     | Household Dynamics                      | Organisation for Economic Co-operation and Development (OECD)             |
| 01_35       | Macroeconomics                     | Household Dynamics                      | Organisation for Economic Co-operation and Development (OECD)             |
| 01_36       | Macroeconomics                     | Household Dynamics                      | Organisation for Economic Co-operation and Development (OECD)             |
| 01_37       | Macroeconomics                     | Household Dynamics                      | Organisation for Economic Co-operation and Development (OECD)             |
| 01_38       | Macroeconomics                     | Household Dynamics                      | Organisation for Economic Co-operation and Development (OECD)             |
| 01_39       | Macroeconomics                     | Non-performing Loans and Solvency       | International Monetary Fund (IMF)                                         |
| 02_01       | Economic Indicators and Investment | Market and Consumer Indices             | Organisation for Economic Co-operation and Development (OECD)             |
| 02_02       | Economic Indicators and Investment | Market and Consumer Indices             | Organisation for Economic Co-operation and Development (OECD)             |
| 02_03       | Economic Indicators and Investment | Market and Consumer Indices             | The World Bank                                                            |
| 02_04       | Economic Indicators and Investment | Investment Trends                       | Organisation for Economic Co-operation and Development (OECD)             |
| 02_05       | Economic Indicators and Investment | Investment Trends                       | Organisation for Economic Co-operation and Development (OECD)             |
| 02_06       | Economic Indicators and Investment | Economic Metrics                        | United Nations World Tourism Organization                                 |
| 03_01       | Industrial and Trade               | Trade Patterns                          | International Monetary Fund (IMF)                                         |
| 03_02       | Industrial and Trade               | Industrial Environmental Impact         | The World Bank                                                            |
| 03_03       | Industrial and Trade               | Industrial Environmental Impact         | Our World in Data                                                         |
| 03_04       | Industrial and Trade               | Industrial Environmental Impact         | Our World in Data                                                         |
| 03_05       | Industrial and Trade               | Industrial Environmental Impact         | The World Bank                                                            |
| 03_06       | Industrial and Trade               | Consumption of Electricity              | The World Bank                                                            |
| 03_07       | Industrial and Trade               | Agriculture                             | The World Bank                                                            |
| 04_01       | Environmental Health               | Air Quality and Pollution               | IQAir                                                                     |
| 04_02       | Environmental Health               | Climate Change Indicators               | International Monetary Fund (IMF)                                         |
| 04_03       | Environmental Health               | Climate Change Indicators               | International Monetary Fund (IMF)                                         |
| 04_04       | Environmental Health               | Climate Change Indicators               | International Monetary Fund (IMF)                                         |
| 04_05       | Environmental Health               | Climate Change Indicators               | International Monetary Fund (IMF)                                         |
| 04_06       | Environmental Health               | Extreme Weather Conditions              | International Monetary Fund (IMF)                                         |
| 04_07       | Environmental Health               | Extreme Weather Conditions              | Germanwatch                                                               |
| 04_08       | Environmental Health               | Environmental Sustainability            | Yale University                                                           |
| 04_09       | Environmental Health               | Environmental Sustainability            | Dual Citizen Inc.                                                         |
| 04_10       | Environmental Health               | Environmental Sustainability            | Vision of Humanity                                                        |
| 04_11       | Environmental Health               | Percentage of Renewable Resources       | The World Bank                                                            |
| 05_01       | Political Sociology                | Corruption Overview                     | Transparency International                                                |
| 05_02       | Political Sociology                | Political Landscape                     | Economist Intelligence Unit                                               |
| 05_03       | Political Sociology                | Political Landscape                     | Freedom House                                                             |
| 05_04       | Political Sociology                | War and Armed Conflicts                 | Vision of Humanity                                                        |
| 05_05       | Political Sociology                | War and Armed Conflicts                 | Vision of Humanity                                                        |
| 05_06       | Political Sociology                | War and Armed Conflicts                 | Vision of Humanity                                                        |
| 05_07       | Political Sociology                | War and Armed Conflicts                 | Uppsala Universitet - Uppsala Conflict Data Program                       |
| 05_08       | Political Sociology                | War and Armed Conflicts                 | Uppsala Universitet - Uppsala Conflict Data Program                       |
| 05_09       | Political Sociology                | War and Armed Conflicts                 | Uppsala Universitet - Uppsala Conflict Data Program                       |
| 05_10       | Political Sociology                | War and Armed Conflicts                 | Uppsala Universitet - Uppsala Conflict Data Program                       |
| 05_11       | Political Sociology                | War and Armed Conflicts                 | Uppsala Universitet - Uppsala Conflict Data Program                       |
| 05_12       | Political Sociology                | War and Armed Conflicts                 | Uppsala Universitet - Uppsala Conflict Data Program                       |
| 05_13       | Political Sociology                | War and Armed Conflicts                 | Uppsala Universitet - Uppsala Conflict Data Program                       |
| 05_14       | Political Sociology                | War and Armed Conflicts                 | Uppsala Universitet - Uppsala Conflict Data Program                       |
| 05_15       | Political Sociology                | Political Inclinations                  | World Values Survey                                                       |
| 05_16       | Political Sociology                | Democracy and Governance                | Electoral Integrity Global Report                                         |
| 05_17       | Political Sociology                | Democracy and Governance                | Varieties of Democracy (V-Dem)                                            |
| 06_01       | Health and Well-Being              | Health                                  | The World Bank                                                            |
| 06_02       | Health and Well-Being              | Health                                  | The World Bank                                                            |
| 06_03       | Health and Well-Being              | Health                                  | World Health Organization (WHO), NCD Risk Factor Collaboration (NCD-RisC) |
| 06_04       | Health and Well-Being              | Health                                  | The World Bank                                                            |
| 06_05       | Health and Well-Being              | Health                                  | MIMI                                                                      |
| 06_06       | Health and Well-Being              | Health                                  | International Labor Organization (ILOSTAT)                                |
| 06_07       | Health and Well-Being              | Health                                  | International Labor Organization (ILOSTAT)                                |
| 06_08       | Health and Well-Being              | Global Burden of Disease                | The Institute for Health Metrics and Evaluation (IHME)                    |
| 06_09       | Health and Well-Being              | Global Burden of Disease                | The Institute for Health Metrics and Evaluation (IHME)                    |
| 06_10       | Health and Well-Being              | Global Burden of Disease                | The Institute for Health Metrics and Evaluation (IHME)                    |
| 06_11       | Health and Well-Being              | Global Burden of Disease                | The Institute for Health Metrics and Evaluation (IHME)                    |
| 06_12       | Health and Well-Being              | Well-Being                              | World Happiness Report                                                    |
| 06_13       | Health and Well-Being              | Mental Health                           | World Health Organization (WHO)                                           |
| 06_14       | Health and Well-Being              | Healthcare Access and Disparities       | World Health Organization (WHO)                                           |
| 06_15       | Health and Well-Being              | Healthcare Access and Disparities       | The World Bank                                                            |
| 06_16       | Health and Well-Being              | Substance Abuse                         | (blank)                                                                   |
| 07_01       | Educational Development            | Worldwide Education Trends              | The World Bank                                                            |
| 07_02       | Educational Development            | Education Disparities and Affordability | (blank)                                                                   |
| 07_03       | Educational Development            | Education Disparities and Affordability | (blank)                                                                   |
| 07_04       | Educational Development            | Maximum Degree of Studies               | Organisation for Economic Co-operation and Development (OECD)             |
| 07_05       | Educational Development            | Maximum Degree of Studies               | Organisation for Economic Co-operation and Development (OECD)             |
| 08_01       | Demographic Trends                 | Population Dynamics and Migration       | (blank)                                                                   |
| 08_02       | Demographic Trends                 | Population Dynamics and Migration       | (blank)                                                                   |
| 08_03       | Demographic Trends                 | Refugee Crisis                          | United Nations High Commissioner for Refugees (UNHCR)                     |
| 08_04       | Demographic Trends                 | Displaced Persons & Asylum Seekers      | (blank)                                                                   |
| 08_05       | Demographic Trends                 | Immigration and Integration             | Migrant Integration Policy Index (MIPEX)                                  |
| 08_06       | Demographic Trends                 | Natality Index                          | The World Bank                                                            |
| 08_07       | Demographic Trends                 | Life Conditions                         | The World Bank                                                            |
| 08_08       | Demographic Trends                 | Mortality Index                         | The World Bank                                                            |
| 08_09       | Demographic Trends                 | Total Population                        | The World Bank                                                            |
| 08_10       | Demographic Trends                 | Population Density                      | The World Bank                                                            |
| 08_11       | Demographic Trends                 | Religious Inclinations                  | (blank)                                                                   |
| 08_12       | Demographic Trends                 | Race                                    | (blank)                                                                   |
| 09_01       | Housing and Living Standards       | Housing Trends and Security             | (blank)                                                                   |
| 09_02       | Housing and Living Standards       | Housing Trends and Security             | (blank)                                                                   |
| 09_03       | Housing and Living Standards       | Housing Trends and Security             | (blank)                                                                   |
| 09_04       | Housing and Living Standards       | Basic Amenities Access                  | (blank)                                                                   |
| 09_05       | Housing and Living Standards       | Basic Amenities Access                  | (blank)                                                                   |
| 10_01       | Social and Humanitarian Issues     | Violence and Crimes                     | (blank)                                                                   |
| 10_02       | Social and Humanitarian Issues     | Violence and Crimes                     | (blank)                                                                   |
| 10_03       | Social and Humanitarian Issues     | Violence and Crimes                     | Small Arms Survey                                                         |
| 10_04       | Social and Humanitarian Issues     | Violence and Crimes                     | Small Arms Survey                                                         |
| 10_05       | Social and Humanitarian Issues     | Violence and Crimes                     | (blank)                                                                   |
| 10_06       | Social and Humanitarian Issues     | Violence and Crimes                     | United Nations Office on Drugs & Crime (UNODOC)                           |
| 10_07       | Social and Humanitarian Issues     | Violence and Crimes                     | United Nations Office on Drugs & Crime (UNODOC)                           |
| 10_08       | Social and Humanitarian Issues     | Violence and Crimes                     | United Nations Office on Drugs & Crime (UNODOC)                           |
| 10_09       | Social and Humanitarian Issues     | Violence and Crimes                     | United Nations Office on Drugs & Crime (UNODOC)                           |
| 10_10       | Social and Humanitarian Issues     | Drug-Related Metrics                    | United Nations Office on Drugs & Crime (UNODOC)                           |
| 10_11       | Social and Humanitarian Issues     | Drug-Related Metrics                    | United Nations Office on Drugs & Crime (UNODOC)                           |
| 10_12       | Social and Humanitarian Issues     | Drug-Related Metrics                    | United Nations Office on Drugs & Crime (UNODOC)                           |
| 10_13       | Social and Humanitarian Issues     | Drug-Related Metrics                    | United Nations Office on Drugs & Crime (UNODOC)                           |
| 10_14       | Social and Humanitarian Issues     | Drug-Related Metrics                    | United Nations Office on Drugs & Crime (UNODOC)                           |
| 10_15       | Social and Humanitarian Issues     | Drug-Related Metrics                    | United Nations Office on Drugs & Crime (UNODOC)                           |
| 10_16       | Social and Humanitarian Issues     | Child Welfare                           | United Nations International Children's Emergency Fund (UNICEF)           |
| 10_17       | Social and Humanitarian Issues     | Child Welfare                           | United Nations International Children's Emergency Fund (UNICEF)           |
| 10_18       | Social and Humanitarian Issues     | Child Welfare                           | United Nations International Children's Emergency Fund (UNICEF)           |
| 10_19       | Social and Humanitarian Issues     | Child Welfare                           | United Nations International Children's Emergency Fund (UNICEF)           |
| 10_20       | Social and Humanitarian Issues     | Nuclear and Security                    | Federation of American Scientists (FAS)                                   |
| 10_21       | Social and Humanitarian Issues     | Nuclear and Security                    | NTI Nuclear Security Index                                                |
| 10_22       | Social and Humanitarian Issues     | Social Injustice and Rights             | Othering & Belonging Institute                                            |
| 10_23       | Social and Humanitarian Issues     | Social Injustice and Rights             | Equaldex                                                                  |
| 10_24       | Social and Humanitarian Issues     | Social Injustice and Rights             | United Nations Development Programme (UNDP)                               |
| 10_25       | Social and Humanitarian Issues     | Social Injustice and Rights             | (blank)                                                                   |
| 10_26       | Social and Humanitarian Issues     | Social Injustice and Rights             | (blank)                                                                   |
| 10_27       | Social and Humanitarian Issues     | Social Injustice and Rights             | Reporters Without Borders (RSF)                                           |
| 10_28       | Social and Humanitarian Issues     | Social Injustice and Rights             | CATO Institute                                                            |
| 10_29       | Social and Humanitarian Issues     | Food Insecurity                         | Global Hunger Index                                                       |
| 10_30       | Social and Humanitarian Issues     | Food Insecurity                         | Food & Agriculture Organization of the United Nations                     |
| 10_31       | Social and Humanitarian Issues     | Food Insecurity                         | Economist Impact                                                          |
| 10_32       | Social and Humanitarian Issues     | Organized Crime                         | OC Index                                                                  |
| 10_33       | Social and Humanitarian Issues     | Travel Danger                           | US Department of State                                                    |
###### Table: [socioeconomic, political & environmental metrics](https://gist.github.com/pabloagn/5c1e0154659156fe8e15cb71705e2771)

---

# A word on metrics
Before we dive deeper into the data, we must understand what a metric is. A metric is a measure used to track and assess the status of a specific process. They can be classified into groups depending on:
- If our metric is independent, or depends on other metrics.
- If our metric measures a relationship between two numbers.
- If our metric shows a frequency of an occurrence, and not a single event.
- If our metric measures the intensity of a given phenomena.

We can try to group metrics under subgroups based on these attributes:
- **Indicator**: Indicators are specific, observable, and measurable attributes or changes that represent a concept of interest. An example would be the poverty rate, which indicates the proportion of the population living below the national poverty line.
- **Index**: An index is a composite metric that aggregates and standardizes multiple indicators to provide an overall score. A well-known example is the Human Development Index (HDI), which combines indicators of life expectancy, education, and income to rank countries into levels of human development.
- **Benchmark**: Benchmarks are standard points of reference against which things may be compared or assessed. A nice example would be voter turnout rates or the number of women in political office compared to international averages.
- **Ratio**: A ratio is a quantitative relationship between two numbers, showing how many times one value contains or is contained within the other. For example, the gender wage gap, which compares the median earnings of women and men.
- **Rate**: A rate is a special kind of ratio, showing the frequency of an occurrence in a defined population over a specific period of time. For instance, literacy rates or crime rates.
- **Scale**: Scales are used to measure the intensity or frequency of certain phenomena and often involve a range of values. The Air Quality Index (AQI), for example, measures the level of air pollution on a scale from 0 to 500.
- **Survey Results**: These are data collected directly from people, such as public opinion on government policies or satisfaction with public services.

Why is this important to understand? Well, because whenever we hear about some metric in the news, we're not always presented with how its calculated:

- Mistaking a composite index such as the Human Development Index (HDI) for a simple indicator like GDP per capita, drastically reduces the understanding of a country's development.
- Mentioning a literacy rate of 95%, without understanding the appropriate benchmark (*like the average literacy rate for its region or income group*) might completely bias the result towards a good outcome, when the real outcome when benchmarked correctly might be extremely low.
- Interpreting a moderate score on an air quality index (AQI) as "safe", without understanding the specific pollutants measured and their health impacts, can lead to underestimating health risks.
- Comparing GDPs between countries without [adjusting for Purchase Power Parity](https://ourworldindata.org/what-are-ppps), or simply using [Nominal GDP vs Real GDP](https://www.khanacademy.org/economics-finance-domain/ap-macroeconomics/economic-iondicators-and-the-business-cycle/real-vs-nominal-gdp/a/lesson-summary-real-vs-nominal-gdp) without acknowledging that the first one includes an inflationary component.
- Taking survey results at face value without considering potential biases in the survey design or the representativeness of the sample can lead to incorrect conclusions about public opinion. This is extremely common and often happens around political contexts, specifically at political polling (*[this Medium article](https://medium.com/@vanacorec/selection-bias-in-political-polling-9fd667e8e7f7) nicely explains this phenomenon*)

The bottom line is that statistics is a very powerful tool that can be used to gather insights, but also mislead people, purposefully or by accident. Knowing how metrics are designed & built is already an extremely valuable tool we can use [anytime Colgate decides to bring out a new advert on how good their product is](https://www.reuters.com/article/uk-britain-colgate-idUKL1654835620070117/).

Of course, knowing our metrics and their components & classification is just the first step in 

---

# Preparing our workspace
Now that the basic theory is all set, we can start by setting up our workspace. This will include:
- Setting up a folder structure.
- Setting up an R project & environment.
- Setting up a Python environment.
- installing required packages for both parties.

## 1. Folder structure set up
Before we create our virtual environments, we'll set up our folder structure. Here's what we'll need:
- A `data` folder: Will contain all our input files.
	- With a subfolder for raw data
	- With a subfolder for processed data
- An `outputs` folder: Will contain all our results.
	- With a figures subfolder
	- With a results subfolder
- A `src` folder: Will contain our source code.
	- With a Python folder
	- With an R folder
- A `.gitignore` file: Will help us remove tracking of specific folders from our repository.

Hence, the tree structure will look something as such:

```
Project Root
│
├── src
│   ├── R
│   │   └── scripts.R
│   │
│   ├── Python
│   │   ├── scripts.py
│   │   └── venv (Python virtual environment)
│   │
│   └── requirements.txt (Python package requirements)
│
├── data
│   ├── raw (Raw data files)
│   └── processed (Processed data files)
│
├── output
│   ├── figures (Generated figures, charts)
│   └── results (Results in CSV, Excel, etc.)
│
├── .Rproj (R Project file)
│
└── .gitignore (To exclude files/folders from Git)
```

## 2. Environment set up
Once we have clarity on our project's directory structure, we can set up our environments. We'll start with R, and then move on with Python.

### 2.1 R
Throughout this segment we'll mostly be using RStudio. A detailed step-by-step tutorial can be found [here](https://rstudio-education.github.io/hopr/starting.html).

We'll set up two different components in R:
- **An R Project**: Will help us set a working directory associated with our project. It includes an `.Rproj` file which, when opened, sets the working directory to the location of this file and restores the session state. This will be useful for accessing inputs using relative paths.
- **An R Environment**: Will help us manage R dependencies, just as with Python.
- **Multiple R Scripts**: Will be the core of our project. They will contain all the code we'll use throughout this segment.

#### 2.1.1 The R Project
We'll start by creating our project. For this, we'll use the Project Root directory we selected previously:
1. **Open RStudio**.
2. **Go to `File` > `New Project`**.
3. Choose **`Existing Directory`**.
4. Define the **location** chosen as the Project Root directory.
5. Click **`Create Project`**.

Now, depending on our Project Root directory name, we should have a new file with the `.Rproj` extension. This file works as a configuration file, and also sets the context for our project. 

#### 2.1.2 The R Environment
We'll now proceed to create an R Environment specifically tailored for this project. From within RStudio we'll head to the R console and execute the following:

```R
install.packages("renv")
```

This will install the `renv` package if we don't have it already. We should get an output similar to the following:

```
package ‘renv’ successfully unpacked and MD5 sums checked
```

Once installed, we can activate our environment using the console:

```R
renv::init()
```

If everything went well, we should end up with the following new files & folders under our Project Root directory:
- `.Rprofile`: This is a script that runs automatically whenever you start an R session in a specific project or directory. It's used to set project-specific options, like library paths, default CRAN mirrors, or any R code you want to run at the start of each session.
- `renv.lock`: This file is created by the `renv` package. It's a lockfile that records the exact versions of R packages used in your project.
- `renv`: This is the folder containing our new environment, similar to what happens with Python `venv` or `virtualenv`.

#### 2.1.3 Installing packages
For this series we'll need several R packages:
- Reading & writing
	- `readr`
	- `readxr`
	- `arrow`
	- `writexl`
	- `openxlsx`
- Data manipulation
	- `dplyr`
	- `tidyr`
	- `data.table`
	- `stringr`
	- `lubridate`
- Statistical Analysis
	- `car`
	- `broom`
- Data visualization
	- `ggplot2`
	- `ggalt`
	- `RColorBrewer`
	- `extrafont`
	- `viridis`

We'll create our first R file inside our Project Root folder. In this file, we'll declare the packages we'll use. We'll install them & import them. The script will be called `dependencies.R` and will contain the following:

```R
# Define packages to install
required_packages <- c("readr",
                       "readxl",
                       "arrow",
                       "writexl",
                       "openxlsx",
                       "dplyr",
                       "tidyr",
                       "data.table",
                       "stringr",
                       "lubridate",
                       "car",
                       "broom",
                       "ggplot2",
                       "ggalt",
                       "RColorBrewer",
                       "extrafont",
                       "viridis")

for (package in required_packages) {
  # We will check if the package is loaded (hence installed)
  if (!require(package, character.only = TRUE)) {
    install.packages(package)
  }
}

# Snapshot the environment with renv
renv::snapshot()
```

This file will behave as a dependency control file, where each time we need to make a change to a specific package, we'll be able to do so from here, without having to manage dependencies from the analysis scripts we'll be creating. For now, let us simply execute this script; all the packages should be installed in our environment, and the environment snapshot should be generated. This ensures that we freeze the package versions we will install now.

Now that R is set up, we're ready to continue with Python.

### 2.2 Python (PENDING)

Install `virtualenv` package:
```PowerShell
pip install virtualenv
```

Create virtual env:
```PowerShell
cd the-state-of-our-world-in-2023\src\Python; virtualenv venv --python='C:\Users\Pablo\AppData\Local\Programs\Python\Python310\python.exe'
```

Create `requirements.txt`:

```
pandas
numpy
xlsxwriter
scipy
matplotlib
seaborn
scikit-learn
statsmodels
tensorflow
ipykernel
```

Install requirements
```PowerShell
 .\venv\Scripts\Activate.ps1; pip install -r requirements.txt; deactivate
```

---

# A brief introduction to R
As we mentioned, this series will be heavily focused on transforming data, and designing & creating visualizations using R. Because of this, we'll quickly go over the basics. You can skip to **Preparing our data** if you're already familiar with R.

## Importing modules
Once we have a library installed, importing it in R is straightforward. We can use the `library()` function in order to import the library to our current project:

##### **Code**
```R
library(ggplot)
```

This will make all `ggplot` methods available to our session.

Let us load the following libraries we'll be using for this demonstration:

##### **Code**
```R
library(readr)
library(readxl)
library(dplyr)
library(tidyr)
library(data.table)
library(lubridate)
library(ggplot2)
library(ggalt)
library(RColorBrewer)
library(viridis)
```

## Reading data
Before we can transform data in R, we need to read it from an external file. There are two main tabular objects we'll use i this series:
- `data.frame`
- `data.table`

There are two main file types we'll read from:
- `csv`
- `xlsx`

There are four main methods we'll be using to read from the defined file types to the defined objects:
- Reading `csv` files into `data.frame` objects.
- Reading `csv` files into `data.table` objects.
- Reading `xlsx` files into `data.frame` objects.
- Reading `xlsx` files into `data.frame` objects and transforming to `data.table` objects.

### Reading csv files into data.frame objects
We can read `csv` files into `data.frame` objects using the following syntax:

##### **Code**
```R
# Define directories
rDir <- "data/raw/"
wDir <- "outputs"
```

##### **Code**
```R
# Load data using read.csv (Dataframe)
df_csv_dataframe <- read.csv(file.path(rDir,
                                       "GDP_Per_Capita",
                                       "API_NY.GDP.PCAP.PP.CD_DS2_en_csv_v2_6011310.csv"))

# Check object type
class(df_csv_dataframe)
```

##### **Output**
```
[1] "data.frame"
```

### Reading csv files into data.table objects
We can also read `csv` files into `data.table` objects using the following syntax:

##### **Code**
```R
# Load data using fread (data.table)
df_csv_datatable <- fread(file.path(rDir,
                                    "GDP_Per_Capita",
                                    "API_NY.GDP.PCAP.PP.CD_DS2_en_csv_v2_6011310.csv"),
                          header=TRUE)

# Check object type
class(df_csv_datatable)
```

##### **Output**
```
[1] "data.table" "data.frame"
```

### Reading xlsx files
We can read `xlsx` files into `data.frame` objects using the following syntax:

##### **Code**
```R
# Load data using read_excel (Dataframe)
df_xlsx_dataframe <- read_excel(file.path(rDir,
                                          "Drug-Related_Crimes",
                                          "10.1._Drug_related_crimes.xlsx"),
                                sheet="Formal contact")

# Check object type
class(df_xlsx_dataframe)
```

##### **Output**
```
[1] "tbl_df"     "tbl"        "data.frame"
```

We can also transform our `data.frame` object to a `data.table` object using the following syntax:

##### **Code**
```R
# Transform data.frame to data.table from excel-read file
df_xlsx_datatable <- as.data.table(df_xlsx_dataframe)

# Check object type
class(df_xlsx_datatable)
```

##### **Output**
```
[1] "data.table" "data.frame"
```

## Performing data transformations
Once we have our data objects available, we can get information about our data and transform our objects using different operations.

### Using data.frame objects
For basic information on our objects, we can use the following: 

##### **Code**
```R
# Check column names
colnames(df_csv_dataframe)

# Check object dimensions
dim(df_csv_dataframe)

# Number of cols
ncol(df_csv_dataframe)

# Number of rows
nrow(df_csv_dataframe)
```

##### **Output**
```
 [1] "Country.Name"   "Country.Code"   "Indicator.Name" "Indicator.Code" "X1960"          "X1961"          "X1962"         
 [8] "X1963"          "X1964"          "X1965"          "X1966"          "X1967"          "X1968"          "X1969"         
[15] "X1970"          "X1971"          "X1972"          "X1973"          "X1974"          "X1975"          "X1976"         
[22] "X1977"          "X1978"          "X1979"          "X1980"          "X1981"          "X1982"          "X1983"         
[29] "X1984"          "X1985"          "X1986"          "X1987"          "X1988"          "X1989"          "X1990"
```

```
[1] 266  67
```

```
[1] 67
```

```
[1] 266
```

We can also check the types for each column:

##### **Code**
```R
# Check data types
sapply(df_csv_dataframe, typeof)
```

##### **Output**
```
 Country.Name   Country.Code Indicator.Name Indicator.Code          X1960          X1961          X1962          X1963 
   "character"    "character"    "character"    "character"      "logical"      "logical"      "logical"      "logical"
```

This output is messy, so with a simple `data.frame` declaration we can create a more legible result:

##### **Code**
```R
# Check data types using data.frame object
data_types <- data.frame(
  Column = names(df_csv_dataframe),
  Type = sapply(df_csv_dataframe, typeof)
  )

data_types
```

##### **Output**
```
                       Column      Type
Country.Name     Country.Name character
Country.Code     Country.Code character
Indicator.Name Indicator.Name character
Indicator.Code Indicator.Code character
X1960                   X1960   logical
X1961                   X1961   logical
X1962                   X1962   logical
X1963                   X1963   logical
X1964                   X1964   logical
X1965                   X1965   logical
X1966                   X1966   logical
X1967                   X1967   logical
X1968                   X1968   logical
X1969                   X1969   logical
X1970                   X1970   logical
X1971                   X1971   logical
X1972                   X1972   logical
X1973                   X1973   logical
X1974                   X1974   logical
X1975                   X1975   logical
X1976                   X1976   logical
X1977                   X1977   logical
X1978                   X1978   logical
X1979                   X1979   logical
X1980                   X1980   logical
X1981                   X1981   logical
X1982                   X1982   logical
X1983                   X1983   logical
X1984                   X1984   logical
X1985                   X1985   logical
X1986                   X1986   logical
X1987                   X1987   logical
X1988                   X1988   logical
X1989                   X1989   logical
X1990                   X1990    double
X1991                   X1991    double
X1992                   X1992    double
X1993                   X1993    double
X1994                   X1994    double
X1995                   X1995    double
...
```

You may have noticed that some columns (*year 1960 to 1989*) have a `logical` datatype, when they should have a `double` datatype since they contain metric values. The reason is that these years are actually empty, and their values are `NA` (*no country presents metric entries for these years*).

This can be easily solved filtering the columns we want to use for our analysis:

##### **Code**
```R
# Define base columns
base_cols <- c("Country.Name", "Country.Code", "Indicator.Name", "Indicator.Code")

# Create range of periods under study (using chars)
period_range <- as.character(seq(min_year, max_year, by=1))

# Prepend X
period_range <- paste0("X", period_range)

# Create col vector
df_cols <- c(base_cols, period_range)

# Subset by valid periods
df_csv_dataframe <- df_csv_dataframe[, df_cols]
```

So now we have a `data.frame` object containing the periods we're interested in.

If on top of this we would like to filter a specific subset of countries for our study, we can do this by using the following:

##### **Code**
```R
# Filter by subset of countries
country_codes <- c("SGP", "UKR", "NOR", "MEX")
df_csv_dataframe <- df_csv_dataframe[df_csv_dataframe$Country.Code %in% country_codes,]
```

This will filter the entries for the following countries:
- Singapore
- Ukraine
- Norway
- Mexico

We can also chain multiple operations in one single expression. This is specially useful when we're trying to perform intermediate calculations and don't want to saturate our environment with unnecessary variables. For this approach we'll use the `dplyr` syntax, since it's more efficient & better in terms of clarity:

##### **Code**
```R
# Chain operations
singapore_average <- df_csv_dataframe %>%
  filter(Country.Code == "SGP") %>%
  select(X2020, X2021) %>%
  pivot_longer(cols = everything()) %>%
  summarize(Mean = mean(value))

sprintf("Average for Singapore metric is: %s.", singapore_average)
```

##### **Output**
```
[1] "Average for Singapore metric is: 109557.0953."
```

### Using data.table objects
Whenever we're dealing with extensive datasets, we'll often be using `data.table` objects, since they're more efficient at handling big data. We can perform similar operations to those of `data.frame`:

Data transformations on `data.table` objects are similar to those on `data.frame` objects:

##### **Code**
```R
# Select columns
country_codes <- c("MEX", "ARG", "BRA")
df_csv_datatable <- df_csv_datatable[df_csv_datatable$`Country Code` %in% country_codes,]

# Perform operations:
#   Get metrics for a specific year
#   Calculate the average
target_year <- "2010"
mean_metric <- mean(df_csv_datatable[,get(target_year)])
collapsed_countries <- paste(country_codes, collapse=', ')
sprintf("Average metric for %s is: %s.", collapsed_countries, mean_metric)
```

##### **Output**
```
"Average metric for MEX, ARG, BRA is: 15928.33481."
```

## Plotting
Generating visuals in R is slightly different than doing the same in Python. R has some core components we need to familiarize ourselves with:
- **Layer**: A layer combines data, aesthetic mapping, a geom (*geometric object*), a stat (*statistical transformation*), and a position adjustment.
	- **Data**: Dataset that we wish to use for our visualization.
	- **Mapping**: Aesthetic mappings describe how variables in the data are mapped to visual properties (*aesthetics*) of geoms.
	- **Geoms**: Geometric objects that will be contained in our visual.
	- **Stats**: Stats define statistical transformations that can happen within our visual.
	- **Position**: All layers have a position adjustment that resolves overlapping geoms.
	- **Scales**: Scales control the details of how data values are translated to visual properties. These can include plot labels, axis legends, data labels, and axis scaling.
	- **Facetting**: Facetting generates small multiples, each displaying a different subset of the data. Facets are an alternative to aesthetics for displaying additional discrete variables.
	- **Coordinate Space**: The coordinate system determines how the x and y aesthetics combine to position elements in the plot.
	- **Themes**: Themes control the display of all non-data elements of the plot.

### Plotting a simple line chart
We'll use the `ggplot` library in order to plot our first line chart. Previous to plotting, we'll need to reshape our object to a long format. A long format simply means that we'll get more rows and less columns, so for example, if we have several columns representing years in our dataset, the `pivot_longer` method will transform each year column into a year entry:

##### **Code**
```R
# Reshape object to longer for better manipulation
df_long <- df_csv_dataframe %>%
  pivot_longer(cols = starts_with('X'),
               names_to = "Year",
               values_to = "Metric",
               names_prefix = "X")

# Cast years to integers
df_long$Year <- as.numeric(df_long$Year)

# Check head
head(df_long)
```

##### **Output**
```
Country.Name Country.Code Indicator.Name                                Indicator.Code     Year Metric
  <chr>        <chr>        <chr>                                         <chr>             <dbl>  <dbl>
1 Mexico       MEX          GDP per capita, PPP (current international $) NY.GDP.PCAP.PP.CD  1990  8214.
2 Mexico       MEX          GDP per capita, PPP (current international $) NY.GDP.PCAP.PP.CD  1991  8689.
3 Mexico       MEX          GDP per capita, PPP (current international $) NY.GDP.PCAP.PP.CD  1992  9058.
4 Mexico       MEX          GDP per capita, PPP (current international $) NY.GDP.PCAP.PP.CD  1993  8754.
5 Mexico       MEX          GDP per capita, PPP (current international $) NY.GDP.PCAP.PP.CD  1994  9206.
6 Mexico       MEX          GDP per capita, PPP (current international $) NY.GDP.PCAP.PP.CD  1995  8645.
```

Now, we can create a simple time series plot for the countries we previously selected:

##### **Code**
```R
ggplot(data = df_long,
       mapping = aes(x = Year, y = Metric, color = Country.Name)) +
  geom_line() +
  theme_gray() +
  labs(title = df_indicator,
       x = "Year",
       y = "Metric",
       color = "Country")
```

##### **Output**
01_time_series.png

These are just the basics for using `ggplot`. Not to worry, we'll discuss more visuals as we navigate through the actual metrics.

---

# Building the country hierarchy
Let us start by building our country hierarchy. We need to define the following:
- Country Names
- Country Codes
- Continent Names
- Region Names
- International Organizations (*if any*)
- Classification by Income

This information can be extracted from [this dataset](https://github.com/lukes/ISO-3166-Countries-with-Regional-Codes/blob/master/all/all.csv) by [lukes](https://github.com/lukes). The `csv` file contains the following columns:
- `name`
- `alpha-2`
- `alpha-3`
- `country-code`
- `iso_3166-2`
- `region`
- `sub-region`
- `intermediate-region`
- `region-code`
- `sub-region-code`
- `intermediate-region-code`

We will use these specific country names throughout the entire series, since some datasets present different names with slight variations, and we want to ensure that the names are consistent throughout our visuals. We will use the [ISO 3166](https://en.wikipedia.org/wiki/List_of_ISO_3166_country_codes) country code framework, specifically the Alpha-3 field as key for the merging operations between datasets.

We will also use a mapping of relevant international organizations per each country so that we can later aggregate countries by organizations. This will give us an extra layer for analysis.

Finally, we will also add development classifications to each country. This will establish a baseline in terms of the degree of development, providing yet another extra layer for analysis.

Let us first import the required libraries:

##### **Code**
```R
library(readr)
library(readxl)
library(writexl)
library(openxlsx)
library(dplyr)
library(tidyr)
library(stringr)
library(lubridate)
```

Next, we'll set some variables: 

##### **Code**
```R
# Directories
rDir <- "data/raw/"
w_FigDir <- "outputs/figures"
utilDir <- file.path(rDir, "Utilities")
```

Now we can read the datasets and perform some transformations so that in the end we have one `data.frame` object with all the relevant fields. We'll start with the country codes:

##### **Code**
```R
# Load country list
df_countries <- read.csv(file.path(utilDir, "Country_Codes.csv"))
colnames(df_countries)

# Change column names
# https://en.wikipedia.org/wiki/List_of_ISO_3166_country_codes
df_countries <- df_countries %>%
  rename(
    "country_name" = "name",
    "iso3166_1_alpha_2" = "alpha.2",
    "iso3166_1_alpha_3" = "alpha.3",
    "iso3166_1_numeric_code" = "country.code",
    "iso3166_2_subdiv" = "iso_3166.2",
    "sub_region" = "sub.region",
    "intermediate_region" = "intermediate.region",
    "region_code" = "region.code",
    "sub_region_code" = "sub.region.code",
    "intermediate_region_code" = "intermediate.region.code"
  )

# Create simple country codes df
df_countries <- df_countries %>%
  select(country_name,
         iso3166_1_alpha_3,
         region,
         region_code,
         sub_region,
         sub_region_code)
```

Next, we'll proceed with the international organizations file. The main organizations we'll include are the following:
- UN
- EU
- EEA
- EFTA
- OECD
- IMF
- IBRD
- NATO
- BRICS
- WTO
- Commonwealth
- African Union
- ASEAN
- Arab League
- OPEC
- G7
- G20
- Schengen Area
- Pacific Islands Forum

We'll load our International Organizations Excel file and create new columns in `df_countries` that indicate us weather a given country belongs to the organization under study:

##### **Code**
```R
# Get the name of all Excel sheets
sheet_names <- excel_sheets(file.path(utilDir, "International_Organizations.xlsx"))

# Iterate over each sheet
for(sheet in sheet_names) {
  # Read the sheet
  sheet_data <- read_excel(file.path(utilDir, "International_Organizations.xlsx"), sheet = sheet)
  # Check if countries in df_countries are present in the sheet
  df_countries[[sheet]] <- df_countries$iso3166_1_alpha_3 %in% sheet_data$country_code
}

colnames(df_countries)
```

##### **Output**
```
 [1] "country_name"          "iso3166_1_alpha_2"     "iso3166_1_alpha_3"     "region"                "region_code"          
 [6] "sub_region"            "sub_region_code"       "UN"                    "EU"                    "EEA"                  
[11] "EFTA"                  "OECD"                  "IMF"                   "IBRD"                  "NATO"                 
[16] "BRICS"                 "WTO"                   "commonwealth"          "african_union"         "ASEAN"                
[21] "arab_league"           "OPEC"                  "G7"                    "G20"                   "schengen_area"        
[26] "pacific_islands_forum"
```

Next, we'll load the country classifications file and merge it with our `df_countries` object. We'll only use the classifications for 2022 since most of our analysis will be based on 2022:

##### **Code**
```R
# Load country classification data
df_country_classification <- read_excel(file.path(utilDir, "Country_Development_Classifications.xlsx"))

# Replace inexisting values with NaN
df_country_classification <- df_country_classification %>%
  mutate_all(~na_if(., ".."))

# We'll only use the 2022 classification since most of the metrics will be from 2022
df_country_classification <- df_country_classification[, c("iso3166_1_alpha_3", "2022")] %>%
  rename("country_classification_2022" = "2022")

# Left merge dataframes
df_countries <- merge(df_countries,
                      df_country_classification,
                      by="iso3166_1_alpha_3",
                      all.x = TRUE)
```

Now, we can simply export our `data.frame` object as `csv` file. We'll use it as base for the next section:

##### **Code**
```R
write.csv(df_countries, file.path(utilDir, "Countries_Baseline.csv"), row.names = FALSE)
```

The final dataset can be found [here]().

---

# Macroeconomics
According to Britannica, macroeconomics is the study of the behaviour of a national or regional economy as a whole. It is concerned with understanding economy-wide events such as the total amount of goods and services produced, the level of unemployment, and the general behaviour of prices.

Depending on who we ask, there are around 7 schools of macroeconomic thought. If we base ourselves on Edmund S. Phelps' [Seven Schools of Macroeconomic Thought](https://academic.oup.com/book/2854), we can find the following:
- **Keynesian**: The central tenet of this school of thought is that government intervention can stabilize the economy via monetary policies & other actions.
- **Monetarist**: This school maintains that the money supply (*the total amount of money in an economy, in the form of coin, currency, and bank deposits*) is the chief determinant on the demand side of short-run economic activity.
- **New Classical**: This school takes the view that short-run fluctuations in the aggregate economy—the business cycle—can be understood within an equilibrium framework of rational, forward-looking agents.
- **New Keynesian**: This school is an evolution of the Keynesian movement. It comes with two main assumptions. First, that people and companies behave rationally and with rational expectations. Second, it assumes a variety of market inefficiencies – including sticky wages and imperfect competition.
- **Supply-side**: Focuses on influencing the supply of labour and goods, using tax cuts and benefit cuts as incentives to work and produce goods.
- **Neoclassical & Neo-Classical Real Business Cycle**: This theory suggests that business cycles are a result of technological changes and the availability of resources, both of which influence productivity and cause changes in the long-run aggregate supply.
- **Structuralist**: This school emphasizes the importance of taking into account structural features (*typically*) when undertaking economic analysis.

Macroeconomics is not simply explained by a couple of metrics; we're talking about a complex system, so we need to look at it from different optics. This is where metrics under this context come into place; they help us assess the current state of the macroeconomic system, and evaluate on how to move forward.

Some of the most relevant subjects that can help explain & influence macroeconomic phenomena are:
- Fluctuation in Interest Rates
- Productive Output (GPD)
- Aggregate Supply & Demand
- Consumer Prices (CPI)
- Poverty (Poverty Rates)
- Monetary Policies
- Fiscal Policies
- External Debt

We'll now take a look at the most relevant.

## 1. GDP
Gross Domestic Product (GDP) has been one of the key metrics used by economists & policy makers throughout the years. So much so that a period of recession is marked by changes in GDP. Roughly speaking, it measures the productive output of a given economy under a given span of time, usually annually. Of course, GDP does not tell the whole story of an economy's performance, and economists figured this out long ago. Nonetheless, GDP is still widely used as a main marker for probing an economy.



---

# Conclusions
Aaa

---

# References
- https://junkcharts.typepad.com/numbersruleyourworld/
- https://junkcharts.typepad.com/
- TAKE ALL WEBSITES FROM HYPERLINKS IN ARTICLE AND PUT THEM HERE
- https://ggplot2.tidyverse.org/reference/
- https://www.britannica.com/money/topic/macroeconomics
- https://www.imf.org/external/pubs/ft/fandd/2014/09/basics.htm
- https://www.britannica.com/money/topic/monetarism
- https://www.encyclopedia.com/social-sciences/applied-and-social-sciences-magazines/economics-new-classical
- https://corporatefinanceinstitute.com/resources/economics/new-keynesian-economics/
- https://www.britannica.com/money/supply-side-economics

---

# Copyright
Pablo Aguirre, Creative Commons Attribution 4.0 International, All Rights Reserved.